# CMS后台管理系统

基础URL：http://127.0.0.1:8888/cms/api/v1.0



# 1. 登录和退出

## 1.1 登录

| 请求地址 | 请求方式 |
| -------- | -------- |
| /login   | POST     |

| 参数名称 | 参数说明 |
| -------- | -------- |
| username | 账号     |
| password | 登录密码 |



返回结果：

```js
// 登录成功
{ code: 200, msg: '登录成功' }

// 登录失败
{ code: 201, msg: '账号错误' }
{ code: 202, msg: '密码错误' }
```





## 1.2 退出





# 2. 用户管理

## 2.1 添加用户

| 请求地址 | 请求方式 |
| -------- | -------- |
| /admin   | POST     |

| 参数名称 | 参数说明            |
| -------- | ------------------- |
| nickname | 用户昵称            |
| email    | 账号（邮件地址）    |
| password | 登录密码            |
| gender   | 性别                |
| avatar   | 头像                |
| state    | 状态，激活 \|  禁用 |
| age      | 年龄                |
| sign     | 个人简介            |
| tel      | 电话                |



返回结果：

```js
// 添加成功
{ code: 200, msg: '添加新用户成功' }

// 添加失败
{ code: 202, msg: '添加新用户失败' }
{ code: 201, msg: '该账号已被占用' }
```





## 2.2 获取用户列表

| 请求地址 | 请求方式 |
| -------- | -------- |
| /admin   | GET      |



返回结果：

```js
// 对象数组，每个单元保存一条用户数据

{
    code: 200,
    msg: "获取用户列表成功",
    data: [
        {
            admin_id: 1,
            admin_email: 'root@jy.com',
            admin_nickname: '大牛',
            admin_tel: 18612345678,
            admin_gender: '人妖',
            admin_age: 22,
            admin_sign: '我是人妖我怕谁，你来咬我呀？？？',
            admin_addtime: '1653745415',
            admin_pic: '/uploads/1.png',
            admin_state: '激活'
    	}
        ...
    ]
}
        
```









## 2.3 根据 id 查询用户

| 请求地址   | 请求方式 |
| ---------- | -------- |
| /admin/:id | GET      |

| 参数名称 | 参数说明 |
| -------- | -------- |
| id       | 用户 id  |



返回结果：

```js
{
    "code": 200,
    "msg": "获取用户信息成功",
    "data": {
        "admin_id": 1,
        "admin_email": "root@ali.com",
        "admin_nickname": "大牛",
        "admin_pwd": "123123",
        "admin_tel": "18612345678",
        "admin_gender": "人妖",
        "admin_age": 22,
        "admin_sign": "我是人妖我怕谁",
        "admin_ctime": 1521234567,
        "admin_pic": "../upload/1.jpg",
        "admin_state": "禁用"
    }
}
```







## 2.4 根据 id 删除用户

| 请求地址   | 请求方式 |
| ---------- | -------- |
| /admin/:id | DELETE   |

| 参数名称 | 参数说明 |
| -------- | -------- |
| id       | 用户id   |



返回结果：

```js
// 成功
{ code: 200, msg: '删除用户成功'}

// 失败
{ code: 201, msg: '删除用户失败'}
```







## 2.5 根据 id 修改用户

| 请求地址   | 请求方式 |
| :--------- | :------- |
| /admin/:id | PUT      |



| 参数名称 | 参数说明            |
| -------- | ------------------- |
| id       | 用户id              |
| nickname | 用户昵称            |
| email    | 账号（邮件地址）    |
| gender   | 性别                |
| avatar   | 头像                |
| state    | 状态，激活 \|  禁用 |
| age      | 年龄                |
| sign     | 个人简介            |
| tel      | 电话                |



返回结果：

```js
// 成功
{ code: 200, msg: '修改用户信息成功' }
// 失败
{ code: 201, msg: '修改用户信息失败' }
```



## 2.6 修改用户状态

| 请求地址                | 请求方式 |
| :---------------------- | :------- |
| /admin/:id/state/:state | put      |



| 参数名称 | 参数说明                                     |
| -------- | -------------------------------------------- |
| id       | 用户id                                       |
| state    | 修改后的状态值，false 代表禁用，true代表激活 |



返回结果：

```js
// 成功
{ code: 200, msg: '修改用户状态成功' }
// 失败
{ code: 201, msg: '修改用户状态失败' }
```





# 3. 栏目管理

## 3.1 添加栏目

| 请求地址 | 请求方式 |
| -------- | -------- |
| /cate    | POST     |

| 参数名称 | 参数说明                     |
| -------- | ---------------------------- |
| name     | 栏目名称                     |
| icon     | 栏目图标                     |
| state    | 栏目状态，1 为启用，0 为禁用 |



返回结果：

```js
// 添加成功
{ code: 200, msg: '添加新用户成功' }

// 添加失败
{ code: 201, msg: '添加新用户失败' }
{ code: 202, msg: '栏目名已被占用' }
{ code: 203, msg: '栏目名不能为空' }

```





## 3.2 获取栏目列表

| 请求地址 | 请求方式 |
| -------- | -------- |
| /cate    | GET      |



返回结果：

```js
// 对象数组，每个单元保存一条用户数据

{
    code: 200,
    msg: "获取栏目列表成功",
    data: [
        {
            cate_id: 1,
            cate_name: '潮科技',
            cate_icon: 'tec',
            cate_state: 1,
            cate_ctime: '2022-05-08',
            cate_show: 1,
    	}
        ...
    ]
}
        
```



## 3.3 根据 id 查询栏目

| 请求地址  | 请求方式 |
| --------- | -------- |
| /cate/:id | GET      |

| 参数名称 | 参数说明 |
| -------- | -------- |
| id       | 栏目 id  |



返回结果：

```js
{
    "code": 200,
    "msg": "获取用户信息成功",
    "data": {
        cate_id: 1,
        cate_name: '潮科技',
        cate_icon: 'tec',
        cate_state: 1,
        cate_ctime: '2022-05-08'
    }
}
```





## 3.4 根据 id 删除栏目

| 请求地址  | 请求方式 |
| --------- | -------- |
| /cate/:id | DELETE   |

| 参数名称 | 参数说明 |
| -------- | -------- |
| id       | 栏目id   |



返回结果：

```js
// 成功
{ code: 200, msg: '删除栏目成功'}

// 失败
{ code: 201, msg: '删除栏目失败'}
```





## 3.5 修改栏目状态

| 请求地址               | 请求方式 |
| :--------------------- | :------- |
| /cate/:id/state/:state | put      |



| 参数名称 | 参数说明                                |
| -------- | --------------------------------------- |
| id       | 栏目id                                  |
| state    | 修改后的状态值，1 代表激活 ，0 代表禁用 |



返回结果：

```js
// 成功
{ code: 200, msg: '修改栏目状态成功' }
// 失败
{ code: 201, msg: '修改栏目状态失败' }
```





## 3.6 根据 id 修改栏目

| 请求地址  | 请求方式 |
| :-------- | :------- |
| /cate/:id | PUT      |



| 参数名称 | 参数说明 |
| -------- | -------- |
| name     | 栏目名称 |
| icon     | 栏目图标 |
| state    | 栏目状态 |



返回结果：

```js
// 成功
{ code: 200, msg: '修改栏目信息成功' }
// 失败
{ code: 202, msg: '修改栏目信息失败' }
{ code: 201, msg: '栏目名称已被占用' }
```





# 4. 文章管理

## 4.1 文章列表

| 请求地址 | 请求方式 |
| -------- | -------- |
| /art     | GET      |



返回结果：

```js
// 对象数组，每个单元保存一条用户数据

{
    code: 200,
    msg: "获取文章列表成功",
    data: [
        {
        	article_id: 1,
        	article_adminid: 1,
        	article_text: "文章内容",
        	article_title: "捷豹路虎将在华国产纯电动车 竞争奔驰EQ系列",
        	cate_name: "潮科技",
        	admin_nickname: "大牛",
        	article_pic: "/upload/152708828354423.jpg",
        	article_state: "已发布",
        	article_good: 169,
        	article_bad: 26,
        	article_click: 656,
       	 	article_ctime: "2022-11-01T15:11:29.000Z"
    	},
        ......
    ]
}
        
```



## 4.2 发表文章

| 请求地址 | 请求方式 |
| -------- | -------- |
| /art     | POST     |

| 参数名称 | 参数说明                 | 必选 |
| -------- | ------------------------ | ---- |
| title    | 文章标题                 | 是   |
| cateid   | 所属栏目id               | 是   |
| content  | 文章内容                 | 是   |
| state    | 文章状态，已发布、待审核 | 否   |
| pic      | 封面图片                 | 否   |
| click    | 点击量                   | 否   |
| good     | 点赞量                   | 否   |
| bad      | 点踩量                   | 否   |



返回结果：

```js
// 添加成功
{ code: 200, msg: '发表文章成功' }

// 添加失败
{ code: 201, msg: '发表文章失败' }

```



## 4.3 根据 id 查询栏目

| 请求地址 | 请求方式 |
| -------- | -------- |
| /art/:id | GET      |

| 参数名称 | 参数说明 |
| -------- | -------- |
| id       | 文章 id  |



返回结果：

```js
{
    "code": 200,
    "msg": "获取用户信息成功",
    "data": {
        article_id: 1,
        article_adminid: 1,
        article_text: "文章内容",
        article_title: "捷豹路虎将在华国产纯电动车 竞争奔驰EQ系列",
        cate_name: "潮科技",
        admin_nickname: "大牛",
        article_pic: "/upload/152708828354423.jpg",
        article_state: "已发布"
        article_good: 169,
        article_bad: 26,
        article_click: 656,
        article_ctime: "2022-11-01T15:11:29.000Z"
    }
}
```



## 4.4 根据id删除文章

| 请求地址 | 请求方式 |
| -------- | -------- |
| /art/:id | DELETE   |

| 参数名称 | 参数说明 |
| -------- | -------- |
| id       | 文章id   |



返回结果：

```js
// 成功
{ code: 200, msg: '删除文章成功'}

// 失败
{ code: 201, msg: '删除文章失败'}
```





## 3.5 根据id修改文章

| 请求地址 | 请求方式 |
| :------- | :------- |
| /art/:id | PUT      |



| 参数名称 | 参数说明                 | 必选 |
| -------- | ------------------------ | ---- |
| title    | 文章标题                 | 是   |
| cateid   | 所属栏目id               | 是   |
| content  | 文章内容                 | 是   |
| state    | 文章状态，已发布、待审核 | 否   |
| pic      | 封面图片                 | 否   |
| click    | 点击量                   | 否   |
| good     | 点赞量                   | 否   |
| bad      | 点踩量                   | 否   |





返回结果：

```js
// 成功
{ code: 200, msg: '修改栏目信息成功' }
// 失败
{ code: 202, msg: '修改栏目信息失败' }
{ code: 201, msg: '栏目名称已被占用' }
```









# 5. 其他

## 5.1 文件上传

| 请求地址 | 请求方式 |
| -------- | -------- |
| /upload  | POST     |

| 参数名称 | 参数说明   |
| -------- | ---------- |
| f        | 文件域名称 |





## 5.2 数据统计

| 请求地址    | 请求方式 |
| ----------- | -------- |
| /data/:type | GET      |

| 参数名称 | 参数说明                                                     |
| -------- | ------------------------------------------------------------ |
| type     | 请求数据类型：week（周访问量）、month（月访问量）、year（年访问量） |

